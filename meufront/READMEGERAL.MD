# My Movies ‚Äì Gerenciador de Filmes

Projeto da P√≥s-Gradua√ß√£o em Engenharia de Software ‚Äì PUC-Rio**
Aluna :  Patricia Fraga  
Data: Abril/2025  

# Descri√ß√£o Geral

O projeto My Movies √© uma aplica√ß√£o  composta por m√∫ltiplas APIs e uma interface web que permite ao usu√°rio cadastrar, consultar, atualizar e remover informa√ß√µes sobre filmes. A aplica√ß√£o tamb√©m se conecta √† API externa p√∫blica TMDB para consultar notas e listas de filmes populares.

## Fluxograma

Aqui est√° um fluxograma que ilustra o funcionamento do projeto:

![Fluxograma](./fluxograma.png)

## Tecnologias Utilizadas

- Python 3.11+  
- Flask com Flask-OpenAPI3  
- SQLAlchemy  
- PostgreSQL (banco de dados)  
- Docker e Docker Compose  
- HTML, CSS e JavaScript puro  


# Componentes do Projeto

| Componente       | Descri√ß√£o                                                                 |
|------------------|---------------------------------------------------------------------------|
| `meufront`       | **COMPONENTE PRINCIPAL** Interface do usu√°rio (HTML/CSS/JavaScript)       |
| `minha_api`      | API secund√°ria que gerencia o banco de dados de filmes do usu√°rio         |
| `filmespop_api`  | API secund√°ria que gerencia filmes populares armazenados no banco         |
| `tmdb_api`       | API intermedi√°ria que se comunica com a API externa do TMDB               |
| `meufront`       | Interface do usu√°rio (HTML/CSS/JavaScript)                                |

# Diagrama da Arquitetura

## Descri√ß√£o dos Componentes de Back-End

`minha_api` ‚Äì API Secund√°ria
API respons√°vel por gerenciar a lista de filmes pessoais do usu√°rio. Permite adicionar, buscar, atualizar ou remover filmes, al√©m de associar uma nota pessoal e marcar se o filme foi assistido. Toda a l√≥gica de CRUD (Create, Read, Update, Delete) da √°rea "Minha Lista" √© controlada por esta API.

`filmespop_api` ‚Äì API Secund√°ria
API que gerencia uma c√≥pia local de filmes populares, originalmente obtidos via TMDB. Permite que o usu√°rio armazene e personalize esses filmes localmente, adicionando marca√ß√µes como ‚Äúquero assistir‚Äù üëÅÔ∏è ou ‚Äúadorei‚Äù ‚ù§Ô∏è.

`tmdb_api` ‚Äì API Intermedi√°ria
API respons√°vel por fazer chamadas diretas √† API externa do TMDB. Atua como intermedi√°ria para proteger a chave de acesso, evitando exposi√ß√£o no front-end. Fornece informa√ß√µes externas como nota e lista de filmes populares, enriquecendo a aplica√ß√£o com dados reais.

# Interface do Usu√°rio (`meufront`)

A interface foi constru√≠da com HTML, CSS e JavaScript puro, sem frameworks. Ela  √© composta por duas p√°ginas principais:

a) index.html ‚Äì Minha √Årea

P√°gina principal da aplica√ß√£o, com foco na gest√£o pessoal dos filmes

Funcionalidades:
- Adicionar um novo filme, buscando a nota do filme da APIO TMDB
- Listar todos os filmes cadastrados nas listas My Ratigs ou My Watchlist
- Atualizar um filme da lista My Watchlist, ap√≥s assistido, informando a nota pessoal de um filme
- Remover um filme

b) index2.html ‚Äì Filmes Populares

P√°gina complementar dedicada √† integra√ß√£o com a API externa TMDB e √† manipula√ß√£o de filmes populares salvos localmente.

Funcionalidades:
- Apresentar filmes populares buscado da API externa TMDB
- Adicionar filmes populares no banco 
- Atualizar informa√ßoes dos filmes como ‚Äúadorei‚Äù  ‚ù§Ô∏è ou  ‚Äúquero assistir‚ÄùüëÅÔ∏è

c) Scripts JavaScript

Script : script.js  
Fun√ß√£o : Controla a l√≥gica da 'Minha √Årea' (`index.html`). Faz chamadas para a `minha_api` e`tmdb_api   

Script : scripts2.js
Fun√ß√£o :Controla a p√°gina de 'Filmes Populares' (`index2.html`). Faz chamadas para a `filmespop_api` e `tmdb_api`. |

d) Rotas
A interface web (`meufront`) consome diretamente rotas HTTP utilizando JavaScript puro com `fetch`, garantindo a integra√ß√£o completa com os componentes back-end da aplica√ß√£o.



# API Externa Utilizada

A aplica√ß√£o faz uso da API externa gratuita 'The Movie Database (TMDB)' 
-  Site: https://developer.themoviedb.org  
-  Licen√ßa: Gratuita para uso educacional, pessoal e n√£o comercial  
-  Cadastro: Foi necess√°rio criar uma conta gratuita e gerar uma API Key , e neste projeto est√° sendo usado a conta criada pela aluna 
-  Rotas Utilizadas:
  - `GET /search/movie`: retorna dados de filmes com base em nome
  - `GET /movie/popular`: retorna lista de filmes populares

ATEN√á√ÉO !! A chave de acesso √† API TMDB (Bearer Token) foi enviada via plataforma da disciplina.  
Para funcionamento da aplica√ß√£o, o professor deve inserir essa chave no arquivo `docker-compose.yml` no seguinte formato:


# Rotas Implementadas

COMPONTENTE PRINCIAL Interface Web (`meufront`)
- Faz chamadas diretamente para todas as rotas REST(`GET`, `POST`, `PUT`, `DELETE`) via JavaScript
  - `index.html`: interage com `minha_api` e `tmdb_api`
  - `index2.html`: interage com `filmespop_api` e `tmdb_api`

API Secudund√°ria (`minha_api`)
- `GET /filmes`: Lista todos os filmes
- `GET /filme?nome_filme=...`: Busca um filme espec√≠fico
- `POST /filme`: Adiciona novo filme
- `PUT /filme`: Atualiza nota pessoal ou status "assistido"
- `DELETE /filme?nome_filme=...`: Remove um filme

API Secund√°ria (`filmespop_api`)
- `GET /filmespop`: Retorna filmes populares locais
- `POST /filmespop`: Adiciona novo filme popular
- `PUT /filmespop`: Atualiza filme popular
- `DELETE /filmespop?nome_filme=...`: Remove filme popular

API Intermedi√°ria (`tmdb_api`)
- `GET /nota?nome_filme=...`: Consulta a nota do filme no TMDB (API externa
- `GET /populares`: Consulta os filmes populares no TMDB (API externa)



## Banco de Dados

Cada componente de back-end possui seu pr√≥prio banco de dados PostgreSQL, criado e gerenciado automaticamente via containers Docker:

- `minha_api` utiliza o banco meubanco_minha_api
- `filmespop_api` utiliza o banco meubanco_filmespop_api

## Docker

Cada componente possui seu pr√≥prio `Dockerfile`. Todos s√£o orquestrados via `docker-compose.yml` na raiz do projeto.

## Executando com Docker Compose

O arquivo `docker-compose.yml` est√° localizado na **raiz do meufront** (componente principal).

Passos para executar usando o Docker Composer:

1. Certifique-se de que o Docker esteja instalado e em execu√ß√£o.
2. Na raiz do folder meufront, edite o arquivo `docker-compose.yml` para atualizar que a chave `TMDB_API_KEY` que foi informada pela aluna na plataforma da disciplina   *** ATEN√á√ÉO ****
3. No terminal, execute:
docker-compose -p my-movies up -d --build

